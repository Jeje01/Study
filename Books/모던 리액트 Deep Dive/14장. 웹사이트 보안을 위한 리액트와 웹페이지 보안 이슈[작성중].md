# 14.1 리액트에서 발생하는 크로스 사이트 스크립팅

- XSS
    - 웹 앱에서 가장 많이 보이는 취약점
    - 제3자가 웹사이트에 악성 스크립트를 삽입해 실행할 수 있는 취약점
    - ex) 게시판

## 14.1.1 dangerouslySetInnerHTML prop

- 오직 __html을 키로 가지고 잇는 객체만 인수로 받을 수 있으며, 이 인수로 넘겨받은 문자열을 DOM에 그대로 표시
- 넘겨주는 문자열 값 검증 필요

## 14.1.2 useRef를 활용한 직접 삽입

- useRef: DOM에 직접 내용 삽입 rksmd
- innerHTML에 보안 취약점이 있는 스크립트 삽입 시 동일 문제 발생
- XSS의 공통 문제 : 웹사이트 개발자가 만들지 않은 코드를 삽입

## 14.1.3 리액트에서 XSS 문제를 피하는 방법

- 확실한 방법 : 삽입 가능한 HTML을 안전한 HTML 코드로 한 번 치환
    
    ⇒ 새니타이즈, 이스케이프
    
- npm 라이브러리를 사용해 해결
    - DOMpurity, sanitize-html, js-xss
- 사용자가 컨텐츠를 저장할 때도 이스케이프를 거치는 게 효율적이고 안전함
    - XSS 위험이 있는 콘텐츠를 DB에 저장하지 않음
    - 보여줄 때마다 일일이 이스케이프를 하지 않아도 됨
- 서버는 ‘클라이언트에서 사용자가 입력한 데이터는 일단 의심한다’라는 자세로 클라이언트의 POST 요청에 있는 HTML을 이스케이프하는 것이 제일 안전함
- 개발자는 외부에 존재하는 모든 코드를 위험한 코드로 간주하고 이를 적절하게 처리해야 함
